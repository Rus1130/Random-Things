<style>
    input {
        border: 0.5px solid black;
    }
    input:focus {
        outline: none;
        border: 0.5px solid black;
    }
    select {
        border: 0.5px solid black;
    }
    select:focus {
        outline: none;
        border: 0.5px solid black;
    }
    html {
        font-family: Arial, Helvetica, sans-serif;
        font-size: 14pt;
    }
    .focus {
        display: initial;
    }
    .unfocus {
        display: none;
    }
    .topToBottom {
        writing-mode: vertical-rl;
    }
    .leftToRight {
        writing-mode: horizontal-tb;
    }
    #grid {
        display: grid;
        grid-template-columns: 100px 130px 100px 100px;
        grid-template-rows: 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px;
        background-color: black;
        width: fit-content;
        height: max-content;
        gap: 2px;
        border: 2px solid black;
        position: absolute;
    }

    #grid-container {
        background-color: white;
    }
    .aligner {
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .grid {
        position: absolute;
        top: 5px;
        right: 250px;
    }
</style>

<head>
    <script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>

    <!--Rus------------------------------------------------------------------------------------------------------------------------->
    <div id="rus" class="focus">
        <input type="text" id="input">
        <select id="typeSelect" title="Type" style="cursor: pointer;">
            <option value="IPA">IPA</option>
            <option value="ortho">Phagspa</option>
        </select>
        <span id="seMarksFull" class="unfocus">
            <input type="checkbox" id="seMarks" name="seMarks" checked>
            <label for="seMarks">Start and End marks</label>
        </span>
    </div>
    <div id="output" style="height: max-content; font-size: 20pt;">&nbsp;</div>

    <br>

    <div id="grid" class="grid"> 
        <span id="grid-container" class="aligner">IPA</span>
        <span id="grid-container" class="aligner">Romanization</span>
        <span id="grid-container" class="aligner">Ortho</span>
        <span id="grid-container" class="aligner">Harmony</span>
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">p</span> <!--IPA-->
        <span id="grid-container" class="aligner">p</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡁ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">b</span> <!--IPA-->
        <span id="grid-container" class="aligner">b</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡂ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">t</span> <!--IPA-->
        <span id="grid-container" class="aligner">t</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡎ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">d</span> <!--IPA-->
        <span id="grid-container" class="aligner">d</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡍ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">k</span> <!--IPA-->
        <span id="grid-container" class="aligner">k</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡌ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">g</span> <!--IPA-->
        <span id="grid-container" class="aligner">g</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡖ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">m</span> <!--IPA-->
        <span id="grid-container" class="aligner">m</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡋ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">n</span> <!--IPA-->
        <span id="grid-container" class="aligner">n</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡏ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">t͡s</span> <!--IPA-->
        <span id="grid-container" class="aligner">z</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡔ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">Top</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">t͡ʃ</span> <!--IPA-->
        <span id="grid-container" class="aligner">ç</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡛ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">Top</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">f</span> <!--IPA-->
        <span id="grid-container" class="aligner">f</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡰ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">s</span> <!--IPA-->
        <span id="grid-container" class="aligner">s</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡞ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɕ</span> <!--IPA-->
        <span id="grid-container" class="aligner">c</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡟ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">Bottom</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">x</span> <!--IPA-->
        <span id="grid-container" class="aligner">h</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡜ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">j</span> <!--IPA-->
        <span id="grid-container" class="aligner">j</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡬ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɾ</span> <!--IPA-->
        <span id="grid-container" class="aligner">r</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡮ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɬ</span> <!--IPA-->
        <span id="grid-container" class="aligner">x</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡝ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">Bottom</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ʎ</span> <!--IPA-->
        <span id="grid-container" class="aligner">l</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡣ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">i</span> <!--IPA-->
        <span id="grid-container" class="aligner">i</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡱ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">none</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɨ</span> <!--IPA-->
        <span id="grid-container" class="aligner">î</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡙ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">left</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɯ</span> <!--IPA-->
        <span id="grid-container" class="aligner">û</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡯ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">left</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">u</span> <!--IPA-->
        <span id="grid-container" class="aligner">u</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡊ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">right</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ø</span> <!--IPA-->
        <span id="grid-container" class="aligner">ö</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡧ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">left</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɤ</span> <!--IPA-->
        <span id="grid-container" class="aligner">ô</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡇ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">right</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">o</span> <!--IPA-->
        <span id="grid-container" class="aligner">o</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡑ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">right</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɛ</span> <!--IPA-->
        <span id="grid-container" class="aligner">e</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡭ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">none</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɔ</span> <!--IPA-->
        <span id="grid-container" class="aligner">ó</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡨ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">left</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">a</span> <!--IPA-->
        <span id="grid-container" class="aligner">a</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡅ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">right</span> <!--Harmony-->
    </div>
</body>


<script>

    var rusDialect = document.getElementById("rus")
    var grid = document.getElementById("grid")


    var type = document.getElementById("typeSelect");
    var output = document.getElementById("output");
    var input = document.getElementById("input")
    var adder;
    var seMarksCheckbox = document.getElementById("seMarks")
    var leftMark = "[";
    var rightMark = "]";
    var directionType = "ltr";

    let conversionHandlerArray = new Array();

    function convert(text, type, direction, marks){
        conversionHandlerArray = [];
        switch(direction){
            case "ttb":
                output.removeAttribute("class","leftToRight");
                output.setAttribute("class","topToBottom");
            break;
            case "ltr":
                output.removeAttribute("class","topToBottom");
                output.setAttribute("class","leftToRight");
            break;
        }
        switch(type){
            case "IPA":
                seMarksCheckbox.checked = true;
                [...text].forEach(function(c){
                    adder = inventory[c]["IPA"]
                    conversionHandlerArray.push(adder);
                })
                if(marks == true){
                    leftMark = "[";
                    rightMark = "]";
                } else {
                    leftMark = "";
                    rightMark = "";
                }
                directionType = "ltr";
                output.innerHTML = leftMark + conversionHandlerArray.join("") + rightMark;
            break;
            case "ortho": 
                [...text].forEach(function(c){
                    adder = inventory[c]["ortho"]
                    conversionHandlerArray.push(adder);
                })
                if(marks == true){
                    leftMark = "ꡲ";
                    rightMark = "ꡳ";
                } else {
                    leftMark = "";
                    rightMark = "";
                }
                directionType = "ttb"
                output.innerHTML = leftMark + conversionHandlerArray.join("") + rightMark;
            break;
        }
    }

    setInterval(function(){
        if(type.value == "ortho"){
            document.getElementById("seMarksFull").removeAttribute("class","unfocus");
        } else {
            document.getElementById("seMarksFull").setAttribute("class","unfocus");
        }
        convert(input.value,type.value,directionType,seMarksCheckbox.checked)
    },1)

    const inventory = {
        "p":{
            IPA:"p",
            ortho:"ꡁ"
        },
        "b":{
            IPA:"b",
            ortho:"ꡂ"
        },
        "t":{
            IPA:"t",
            ortho:"ꡎ"
        },
        "d":{
            IPA:"d",
            ortho:"ꡍ"
        },
        "k":{
            IPA:"k",
            ortho:"ꡌ"
        },
        "g":{
            IPA:"g",
            ortho:"ꡖ"
        },
        "m":{
            IPA:"m",
            ortho:"ꡋ"
        },
        "n":{
            IPA:"n",
            ortho:"ꡏ"
        },
        "f":{
            IPA:"f",
            ortho:"ꡰ"
        },
        "s":{
            IPA:"s",
            ortho:"ꡞ"
        },
        "c":{
            IPA:"ɕ",
            ortho:"ꡟ"
        },
        "h":{
            IPA:"x",
            ortho:"ꡜ"
        },
        "j":{
            IPA:"j",
            ortho:"ꡬ"
        },
        "r":{
            IPA:"ɾ",
            ortho:"ꡮ"
        },
        "x":{
            IPA:"ɬ",
            ortho:"ꡝ"
        },
        "l":{
            IPA:"ʎ",
            ortho:"ꡣ"
        },
        "z":{
            IPA:"t͡s",
            ortho:"ꡔ"
        },
        "ç":{
            IPA:"t͡ʃ",
            ortho:"ꡛ"
        },
        "i":{
            IPA:"i",
            ortho:"ꡱ"
        },
        "î":{
            IPA:"ɨ",
            ortho:"ꡙ"
        },
        "û":{
            IPA:"ɯ",
            ortho:"ꡯ"
        },
        "u":{
            IPA:"u",
            ortho:"ꡊ"
        },
        "ö":{
            IPA:"ø",
            ortho:"ꡧ"
        },
        "ô":{
            IPA:"ɤ",
            ortho:"ꡇ"
        },
        "o":{
            IPA:"o",
            ortho:"ꡑ"
        },
        "e":{
            IPA:"ɛ",
            ortho:"ꡭ"
        },
        "ó":{
            IPA:"ɔ",
            ortho:"ꡨ"
        },
        "a":{
            IPA:"a",
            ortho:"ꡅ"
        },
        " ":{
            IPA:" ",
            ortho:"꡶ ꡶"
        },
        ".":{
            IPA:".",
            ortho:""
        }
    }

    hotkeys("enter",function(){
        convert(input.value,type.value,directionType,seMarksCheckbox.checked)
    })

</script>