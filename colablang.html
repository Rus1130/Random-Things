<style>
    input {
        border: 0.5px solid black;
    }
    input:focus {
        outline: none;
        border: 0.5px solid black;
    }
    select {
        border: 0.5px solid black;
    }
    select:focus {
        outline: none;
        border: 0.5px solid black;
    }

    html {
        font-family: Arial, Helvetica, sans-serif;
        font-size: 14pt;
    }
    .focus {
        display: initial;
    }
    .unfocus {
        display: none;
    }
    .vert {
        writing-mode: vertical-rl;
        position: absolute;
        top: 25px;
        left: 3px;
        margin-top: 9px;
    }
    .horiz {
        writing-mode: horizontal-tb;
    }
    #grid {
        display: grid;
        grid-template-columns: 100px 130px 100px 100px;
        grid-template-rows: 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px 25px;
        background-color: black;
        width: fit-content;
        height: max-content;
        gap: 2px;
        border: 2px solid black;
        position: absolute;
    }

    #grid-container {
        background-color: white;
    }
    .aligner {
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .vert-grid {
        position: absolute;
        top: 36px;
        left: 60px;
    }
    .horiz-grid {
        position: absolute;
        top: 10px;
        left: 372px;
    }
</style>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>

    <!--Rus------------------------------------------------------------------------------------------------------------------------->
    <div id="output" style="height: max-content; font-size: 20pt;">&nbsp;</div>
    <div id="rus" class="focus">
        <input type="text" id="convert" onchange="convertRus(convertType.value, convertText.value)">
        <select id="typeSelect" onchange="convertRus(convertType.value, convertText.value)" title="Type" style="cursor: pointer;">
            <option value="IPA">IPA</option>
            <option value="phagspa">Phagspa</option>
        </select>
        <span style="font-size: 12pt;">
            Dialect:
            <select id="dialectSelect">
                <option value="rus">Rus</option>
            </select>
        </span>
        <span id="seMarksFull" class="unfocus">
            <input type="checkbox" id="seMarks" name="seMarks" checked>
            <label for="seMarks">Start and End marks</label>
        </span>
    </div>

    <br>

    <div id="grid" class="grid-pos"> 
        <span id="grid-container" class="aligner">IPA</span>
        <span id="grid-container" class="aligner">Romanization</span>
        <span id="grid-container" class="aligner">Ortho</span>
        <span id="grid-container" class="aligner">Harmony</span>
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">p</span> <!--IPA-->
        <span id="grid-container" class="aligner">p</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡁ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">b</span> <!--IPA-->
        <span id="grid-container" class="aligner">b</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡂ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">t</span> <!--IPA-->
        <span id="grid-container" class="aligner">t</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡎ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">d</span> <!--IPA-->
        <span id="grid-container" class="aligner">d</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡍ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">k</span> <!--IPA-->
        <span id="grid-container" class="aligner">k</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡌ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">g</span> <!--IPA-->
        <span id="grid-container" class="aligner">g</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡖ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">m</span> <!--IPA-->
        <span id="grid-container" class="aligner">m</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡋ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">n</span> <!--IPA-->
        <span id="grid-container" class="aligner">n</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡏ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">t͡s</span> <!--IPA-->
        <span id="grid-container" class="aligner">z</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡔ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">Top</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">t͡ʃ</span> <!--IPA-->
        <span id="grid-container" class="aligner">ç</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡛ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">Top</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">f</span> <!--IPA-->
        <span id="grid-container" class="aligner">f</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡰ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">s</span> <!--IPA-->
        <span id="grid-container" class="aligner">s</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡞ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɕ</span> <!--IPA-->
        <span id="grid-container" class="aligner">c</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡟ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">Bottom</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">x</span> <!--IPA-->
        <span id="grid-container" class="aligner">h</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡜ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">j</span> <!--IPA-->
        <span id="grid-container" class="aligner">j</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡬ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɾ</span> <!--IPA-->
        <span id="grid-container" class="aligner">r</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡮ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɬ</span> <!--IPA-->
        <span id="grid-container" class="aligner">x</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡝ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">Bottom</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ʎ</span> <!--IPA-->
        <span id="grid-container" class="aligner">l</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡣ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">None</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">i</span> <!--IPA-->
        <span id="grid-container" class="aligner">i</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡱ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">none</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɨ</span> <!--IPA-->
        <span id="grid-container" class="aligner">î</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡙ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">left</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɯ</span> <!--IPA-->
        <span id="grid-container" class="aligner">û</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡯ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">left</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">u</span> <!--IPA-->
        <span id="grid-container" class="aligner">u</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡊ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">right</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ø</span> <!--IPA-->
        <span id="grid-container" class="aligner">ö</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡧ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">left</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɤ</span> <!--IPA-->
        <span id="grid-container" class="aligner">ô</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡇ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">right</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">o</span> <!--IPA-->
        <span id="grid-container" class="aligner">o</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡑ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">right</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɛ</span> <!--IPA-->
        <span id="grid-container" class="aligner">e</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡭ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">none</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">ɔ</span> <!--IPA-->
        <span id="grid-container" class="aligner">ó</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡨ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">left</span> <!--Harmony-->
        <!------------------------------------------------------------------>
        <span id="grid-container" class="aligner">a</span> <!--IPA-->
        <span id="grid-container" class="aligner">a</span> <!--Roman-->
        <span id="grid-container" class="aligner">ꡅ</span> <!--Ortho-->
        <span id="grid-container" class="aligner">right</span> <!--Harmony-->
    </div>


    <!--Aspyn------------------------------------------------------------------------------------------------------------------------->
    <div id="aspyn" class="unfocus">
        <input type="text" id="convert" onchange="convertAspyn(convertType.value, convertText.value)">
        <select id="typeSelect" onchange="convertAspyn(convertType.value, convertText.value)" title="Type" style="cursor: pointer;">
            <option value="IPA">IPA</option>
            <option value="mongol">Mongol</option>
        </select>
        <span style="font-size: 12pt;">
            Dialect:
            <select id="dialectSelect">
                <option value="rus">Rus</option>
                <option value="aspyn">Aspyn</option>
            </select>
        </span>
    </div>
</body>


<script>

    var rusDialect = document.getElementById("rus")
    var grid = document.getElementById("grid")
    var aspynDialect = document.getElementById("aspyn")


    var convertType = document.getElementById("typeSelect");
    var output = document.getElementById("output");
    var convertText = document.getElementById("convert");
    var adder;
    var seMarksCheckbox = document.getElementById("seMarks")
    var leftMarks;
    var rightMarks;
    var typeType = "IPA";

    let conversionHandlerArray = new Array();

    function convertRus(type, text){
        switch(type){
            case "IPA":
                typeType = "IPA";
                conversionHandlerArray = [];
                [...text].forEach(function(c){
                    adder = inventoryRus[c]["IPA"]
                    conversionHandlerArray.push(adder);
                })
                break;
            case "phagspa":
                typeType = "phagspa";
                conversionHandlerArray = [];
                [...text].forEach(function(c){
                    adder = inventoryRus[c]["phagspa"]
                    conversionHandlerArray.push(adder)
                })
                break;
            default:
                return console.error("syntax error");
        }
    }

    function convertAspyn(type, text){
        switch(type){
            case "IPA":
                typeType = "IPA";
                conversionHandlerArray = [];
                [...text].forEach(function(c){
                    adder = inventoryAspyn[c]["IPA"]
                    conversionHandlerArray.push(adder);
                })
                break;
            case "mongol":
                typeType = "mongol";
                conversionHandlerArray = [];
                [...text].forEach(function(c){
                    adder = inventoryAspyn[c]["mongol"]
                    conversionHandlerArray.push(adder)
                })
                break;
            default:
                return console.error("syntax error");
        }
    }

    function checkMarks(dialect){
        switch("rus"){
            case "rus":
            if (typeType == "phagspa" && seMarksCheckbox.checked == true){
                document.getElementById("seMarksFull").setAttribute("class","focus")
                rusDialect.setAttribute("class","vertPos")
                grid.setAttribute("class","vert-grid")
                output.setAttribute("class","vert")
                leftMarks = "ꡲ";
                rightMarks = "ꡳ";
                output.innerHTML = leftMarks + conversionHandlerArray.join("") + rightMarks
            } else {
                if(typeType == "IPA"){
                    rusDialect.setAttribute("class","horizPos")
                    grid.setAttribute("class","horiz-grid")
                    output.setAttribute("class","horiz")
                    document.getElementById("seMarksFull").setAttribute("class","unfocus")
                    leftMarks = "[";
                    rightMarks = "]";
                    output.innerHTML = leftMarks + conversionHandlerArray.join("") + rightMarks
                } else {
                    if(seMarksCheckbox.checked == false){
                        rusDialect.setAttribute("class","horizPos")
                        output.setAttribute("class","vert")
                        grid.setAttribute("class","vert-grid")
                        document.getElementById("seMarksFull").setAttribute("class","focus")
                        leftMarks = "";
                        rightMarks = "";
                        output.innerHTML = leftMarks + conversionHandlerArray.join("") + rightMarks
                    }
                }
            }
            break;
        }
    }

    setInterval(function(){
        checkMarks("rus")
    },1)

    function dialectRusShow(){
        rusDialect.setAttribute("class","focus")
        aspynDialect.setAttribute("class","unfocus")
    }

    function dialectAspynShow(){
        rusDialect.setAttribute("class","unfocus")
        aspynDialect.setAttribute("class","focus")
    }


    const inventoryRus = {
        "p":{
            IPA:"p",
            phagspa:"ꡁ"
        },
        "b":{
            IPA:"b",
            phagspa:"ꡂ"
        },
        "t":{
            IPA:"t",
            phagspa:"ꡎ"
        },
        "d":{
            IPA:"d",
            phagspa:"ꡍ"
        },
        "k":{
            IPA:"k",
            phagspa:"ꡌ"
        },
        "g":{
            IPA:"g",
            phagspa:"ꡖ"
        },
        "m":{
            IPA:"m",
            phagspa:"ꡋ"
        },
        "n":{
            IPA:"n",
            phagspa:"ꡏ"
        },
        "f":{
            IPA:"f",
            phagspa:"ꡰ"
        },
        "s":{
            IPA:"s",
            phagspa:"ꡞ"
        },
        "c":{
            IPA:"ɕ",
            phagspa:"ꡟ"
        },
        "h":{
            IPA:"x",
            phagspa:"ꡜ"
        },
        "j":{
            IPA:"j",
            phagspa:"ꡬ"
        },
        "r":{
            IPA:"ɾ",
            phagspa:"ꡮ"
        },
        "x":{
            IPA:"ɬ",
            phagspa:"ꡝ"
        },
        "l":{
            IPA:"ʎ",
            phagspa:"ꡣ"
        },
        "z":{
            IPA:"t͡s",
            phagspa:"ꡔ"
        },
        "ç":{
            IPA:"t͡ʃ",
            phagspa:"ꡛ"
        },
        "i":{
            IPA:"i",
            phagspa:"ꡱ"
        },
        "î":{
            IPA:"ɨ",
            phagspa:"ꡙ"
        },
        "û":{
            IPA:"ɯ",
            phagspa:"ꡯ"
        },
        "u":{
            IPA:"u",
            phagspa:"ꡊ"
        },
        "ö":{
            IPA:"ø",
            phagspa:"ꡧ"
        },
        "ô":{
            IPA:"ɤ",
            phagspa:"ꡇ"
        },
        "o":{
            IPA:"o",
            phagspa:"ꡑ"
        },
        "e":{
            IPA:"ɛ",
            phagspa:"ꡭ"
        },
        "ó":{
            IPA:"ɔ",
            phagspa:"ꡨ"
        },
        "a":{
            IPA:"a",
            phagspa:"ꡅ"
        },
        " ":{
            IPA:" ",
            phagspa:"꡶ ꡶"
        },
        ".":{
            IPA:".",
            phagspa:""
        }
    }

    const inventoryAspyn = {
        "p":{
            IPA:"p",
            mongol:"ᠢ"
        },
        "b":{
            IPA:"b",
            mongol:"ᠦ᠋"
        },
        "t":{
            IPA:"t̪",
            mongol:"ᠯ"
        },
        "d":{
            IPA:"d̪",
            mongol:"ᠯᠯ"
        },
        "k":{
            IPA:"k",
            mongol:"ᠷ"
        },
        "g":{
            IPA:"g",
            mongol:"ᠷᠷ"
        },
        "m":{
            IPA:"m",
            mongol:"ᠠ᠋᠊ᡴ᠋"
        },
        "n":{
            IPA:"n̪",
            mongol:"ᢊ᠊ᡴ᠋"
        },
        "f":{
            IPA:"ɸ",
            mongol:"ᢒᠠ᠋"
        },
        "v":{
            IPA:"β",
            mongol:"ᠹᠠ᠋"
        },
        "s":{
            IPA:"s̪",
            mongol:"ᠮᠠ᠋"
        },
        "c":{
            IPA:"ɕ",
            mongol:"ᠭᠮᠠ᠋"
        },
        "x":{
            IPA:"ç",
            mongol:"ᢋᠠ᠋"
        },
        "h":{
            IPA:"ʝ",
            mongol:"ᢌᠠ᠋"
        },
        "j":{
            IPA:"j",
            mongol:"ᢎ"
        },
        "r":{
            IPA:"r",
            mongol:"ᠺ"
        },
        "l":{
            IPA:"ɾ̪",
            mongol:"ᠾ"
        },
        "i":{
            IPA:"i",
            mongol:"ᢏ"
        },
        "w":{
            IPA:"ɯ",
            mongol:"ᠨ"
        },
        "u":{
            IPA:"u",
            mongol:"ᠨᠨ"
        },
        "o":{
            IPA:"o",
            mongol:"ᢔᢔᠰ"
        },
        "e":{
            IPA:"ɛ",
            mongol:"ᠲ"
        },
        "y":{
            IPA:"ʌ",
            mongol:"ᠮ"
        },
        "0":{
            IPA:"ɔ",
            mongol:"ᠮᠮ"
        },
        "a":{
            IPA:"a",
            mongol:"ᠱ"
        },
        "q":{
            IPA:"ɑ",
            mongol:"ᠱᠱ"
        },
        "!":{
            IPA:"",
            mongol:"ᡅᠠ᠋"
        },
        "#":{
            IPA:"",
            mongol:"ᠺᡓ"
        },
        "$":{
            IPA:"",
            mongol:"ᢖ"
        },
        "%":{
            IPA:"",
            mongol:"ᢇ"
        },
        "&":{
            IPA:"",
            mongol:"ᡏ"
        },
        "?":{
            IPA:"",
            mongol:"ᡰ"
        },
        "_":{
            IPA:"",
            mongol:"ᡪ"
        },
        "-":{
            IPA:"",
            mongol:"᠆"
        },
        ".":{
            IPA:".",
            mongol:""
        },
        " ":{
            IPA:" ",
            mongol:" "
        }
    }

</script>