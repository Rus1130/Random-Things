<style>
    body {
        margin: 0;
    }
</style>
<head>
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>

    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.152.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.152.0/examples/jsm/"
        }
      }
    </script>
</head>
<script type="module" defer>
    import * as THREE from 'three';
    import { FirstPersonControls } from 'three/addons/controls/FirstPersonControls.js';


    const scene = new THREE.Scene();
    const player = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

    const renderer = new THREE.WebGLRenderer({ alpha: true });
    renderer.setSize( window.innerWidth, window.innerHeight );
    document.body.appendChild( renderer.domElement );
    player.position.z = 5;

    // const fpc = new FirstPersonControls(player, renderer.domElement);
    // fpc.activeLook = false;

    function createCube(dimensions, coords, color){
        const geometry = new THREE.BoxGeometry( ...dimensions );
        // make the edges of the cube a different color from the faces
        const material = new THREE.MeshBasicMaterial( { color: color })
        
        const cube = new THREE.Mesh( geometry, material );
        
        scene.add( cube );

        coords = coords || {};
        coords.x = coords.x || 0;
        coords.y = coords.y || 0;
        coords.z = coords.z || 0;

        cube.position.x = coords.x;
        cube.position.y = coords.y;
        cube.position.z = coords.z;

        return cube;
    }

    let keys = {};

    document.onkeydown = e => {
        keys[e.key] = true;
    }

    document.onkeyup = e => {
        keys[e.key] = false;
    }

    createCube([1,1,1], {x: 2, z: -4}, 0x000000);
    createCube([1,1,1], {x: -2}, 0x00ff00);
    createCube([100,0,100], {y: -1}, 0x0000ff);


    function animate() {
        requestAnimationFrame( animate );

        if(keys['w']){
            player.position.z -= 0.1;
        }
        if(keys['s']){
            player.position.z += 0.1;
        }
        if(keys['a']){
            player.position.x -= 0.1;
        }
        if(keys['d']){
            player.position.x += 0.1;
        }

        //fpc.update();
        renderer.render( scene, player );
    }
    animate();
</script>