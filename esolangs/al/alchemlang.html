<style>
    .btn {
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: monospace;
        border: 1px black solid;
        border-radius: 2px;
        font-size: 15px;
        background-color: beige;
        width: 500px;
        height: 50px;
        font-size: 20px;
        transition: ease 0.3s;
    }
    .btn:hover {
        background-color: #f0f0f0;
    }
    html {
        font-family: monospace;
        user-select: none;
        font-size: 20px;
    }
    textarea {
        resize: none;
        font-family: monospace;
        outline: 0px;
        color: black;
    }
    #transmutation_area {
        position: absolute;
        left: 560px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

</style>
<head>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.4.1/lib/p5.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.6/addons/p5.dom.js"></script>
</head>
<body>
    <div id="transmutation_area"></div>
    <textarea id="inputTextarea" style="width: 500px; height: 200px;" spellcheck="false"></textarea>
    <br><br>
    <button class="btn" onclick="interpret()">Run!</button>
    <br>
    <textarea id="output" style="width: 500px; height: 200px;" readonly></textarea>
</body>
<script>
    let variables = []
    const inputTextarea = document.getElementById("inputTextarea")
    const output = document.getElementById("output")
    const transmutationArea = document.getElementById("transmutation_area")
    const baseTransmutationCircleDiameter = 690
    const innerBaseTransmutationCirclesDiameter = 640
    

    var canvas;
    function setup(){
        canvas = createCanvas(700, 700)
        canvas.parent("transmutation_area")
        background("#ffffff")

    }
    /**
     * Primary update function called each frame by P5JS
     */

    function interpret(){
        transmutationArea.innerHTML = ''
        canvas.parent("transmutation_area")
        let instructions = inputTextarea.value.split("\n")
        for(i = 0; i < instructions.length; i++){
            let instruction = instructions[i].split(" ")
            if(instruction[0] == "transmutation"){
                if(instruction[1] == "circle"){
                    if(instruction[2] == "base"){
                        stroke('black')
                        strokeWeight(3.5)
                        noFill()
                        circle(width / 2, height / 2, baseTransmutationCircleDiameter)

                        stroke('black')
                        strokeWeight(2)
                        noFill()
                        circle(width / 2, height / 2, baseTransmutationCircleDiameter - 100)
                    }else if (instruction[2] == 'outer'){
                        if(typeof parseInt(instructions[3]) === "number"){
                            let angle = 0;
                            let outerCircleCount = parseInt(instructions[3]);
                            for(let i = angle; i < radians(360 + angle) ; i += radians(360 / outerCircleCount) ){
                                let x = innerBaseTransmutationCirclesDiameter / 2 * Math.cos(i) + width / 2;
                                let y = innerBaseTransmutationCirclesDiameter / 2 * Math.sin(i) + height / 2;
                                stroke('black')
                                strokeWeight(1)
                                fill('white')
                                circle(x, y, 48)
                            }
                        }
                    }
                } 
            }
        }
    }

</script>