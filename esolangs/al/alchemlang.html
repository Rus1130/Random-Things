<style>
    .btn {
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: monospace;
        border: 1px black solid;
        border-radius: 2px;
        font-size: 15px;
        background-color: beige;
        width: 500px;
        height: 50px;
        font-size: 20px;
        transition: ease 0.3s;
    }
    .btn:hover {
        background-color: #f0f0f0;
    }
    html {
        font-family: monospace;
        user-select: none;
        font-size: 20px;
    }
    textarea {
        resize: none;
        font-family: monospace;
        outline: 0px;
        color: black;
    }
    #transmutation_area {
        position: absolute;
        left: 560px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

</style>
<head>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.4.1/lib/p5.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.6/addons/p5.dom.js"></script>
</head>
<body>
    <div id="transmutation_area"></div>
    <textarea id="inputTextarea" style="width: 500px; height: 200px;" spellcheck="false"></textarea>
    <br><br>
    <button class="btn" onclick="interpret()">Run!</button>
    <br>
    <textarea id="output" style="width: 500px; height: 200px;" readonly></textarea>
</body>
<script>
    let variables = []
    const inputTextarea = document.getElementById("inputTextarea")
    const output = document.getElementById("output")
    const transmutationArea = document.getElementById("transmutation_area")
    const tmutBaseDiameter = 690
    const tmutSubringsDiameter = 640
    

    var canvas;
    function setup(){
        canvas = createCanvas(700, 700)
        canvas.parent("transmutation_area")
        background("#ffffff")

    }
    /**
     * Primary update function called each frame by P5JS
     */

    function interpret(){
        canvas.clear()
        transmutationArea.innerHTML = ''
        canvas.parent("transmutation_area")
        let instructions = inputTextarea.value.split("\n")
        for(i = 0; i < instructions.length; i++){
            let instruction = instructions[i].split(" ")
            if(instruction[0] == "tmut"){
                if(instruction[1] == "base"){
                    stroke('black')
                    strokeWeight(3.5)
                    noFill()
                    circle(width / 2, height / 2, tmutBaseDiameter)

                    stroke('black')
                    strokeWeight(2)
                    noFill()
                    circle(width / 2, height / 2, tmutBaseDiameter - 100)
                } else if(instruction[1] == 'subrings'){
                    if(typeof parseInt(instruction[2]) == 'number'){
                        let subrings = parseInt(instruction[2])
                        let separation = 360 / subrings
                        let angle = 0;
                        console.log(separation)
                        for(j = 0; j < subrings; j++){
                            
                            let x = tmutSubringsDiameter * Math.cos(angle) + width / 2
                            let y = tmutSubringsDiameter * Math.sin(angle) + height / 2

                            angle += separation

                            stroke('black')
                            strokeWeight(2)
                            noFill()
                            circle(x, y, 50)
                        }
                    }
                }
            }
        }
    }

</script>