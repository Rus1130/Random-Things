<style>
</style>
<head>

</head>
<body>
    <script src="./two.js"></script>
    <div id="stats">
    </div>
</body>
<script>

    let two = new Two({
        fullscreen: true,
        autostart: true
    }).appendTo(document.body);

    let hide = true;

    const bounceAmount = 1;

    let lines = []

    let yLine = two.makeLine(two.width / 2, 0, two.width / 2, two.height / 2);
    yLine.stroke = '#00ff00';
    yLine.linewidth = 3;

    let xLine = two.makeLine(0, two.height / 2, two.width / 2, two.height / 2);
    xLine.stroke = '#ff0000';
    xLine.linewidth = 3;

    let hypoLine = two.makeLine(xLine.vertices[0].x, xLine.vertices[0].y, yLine.vertices[0].x, yLine.vertices[0].y);
    hypoLine.stroke = '#0000ff';
    hypoLine.linewidth = 3;

    let maxXLine = two.makeLine(0, 0, 0, two.height);
    maxXLine.stroke = '#ff0000';

    let maxYLine = two.makeLine(0, 0, two.width, 0);
    maxYLine.stroke = '#00ff00';

    let maxHypoLine = two.makeLine(0, 0, two.width, two.height);
    maxHypoLine.stroke = '#0000ff';

    let center = two.makeCircle(two.width / 2, two.height / 2, 5);
    center.fill = '#000000';

    let borderSphere = two.makeCircle(0, 0, 2);
    borderSphere.fill = '#000000';
    borderSphere.noStroke();

    if(hide){
        yLine.opacity = 0;
        xLine.opacity = 0;
        hypoLine.opacity = 0;
        maxXLine.opacity = 0;
        maxYLine.opacity = 0;
    }

    for(i = 0; i < bounceAmount; i++){
        let line = two.makeLine(0, 0, 0, 0);
        line.stroke = '#000000';
        lines.push(line);
    }

    document.body.addEventListener('mousemove', function (e) {
        yLine.vertices[0].y = e.clientY;
        xLine.vertices[0].x = e.clientX;

        hypoLine.vertices[0].x = yLine.vertices[0].x;
        hypoLine.vertices[0].y = yLine.vertices[0].y;
        hypoLine.vertices[1].x = xLine.vertices[0].x;
        hypoLine.vertices[1].y = xLine.vertices[0].y;

        maxXLine.vertices[0].x = xLine.vertices[0].x;
        maxXLine.vertices[1].x = xLine.vertices[0].x;

        maxYLine.vertices[0].y = yLine.vertices[0].y;
        maxYLine.vertices[1].y = yLine.vertices[0].y;

        maxHypoLine.vertices[0].x = center.translation.x;
        maxHypoLine.vertices[0].y = center.translation.y;

        // rotate maxHypoLine.vertices[1] so it is perpendicular to hypoLine
        let angle = Math.atan2(hypoLine.vertices[1].y - hypoLine.vertices[0].y, hypoLine.vertices[1].x - hypoLine.vertices[0].x);

        // get the distance from the center to the edge of the screen at the angle of hypoLine
        let distance = Math.sqrt(Math.pow(center.translation.x - two.width, 2) + Math.pow(center.translation.y - two.height, 2));

        maxHypoLine.vertices[1].x = center.translation.x + Math.cos(angle) * distance/2;
        maxHypoLine.vertices[1].y = center.translation.y - Math.sin(angle) * distance/2;

        // have borderSphere always be on the edge of the screen where maxHypoLine exits the screen
        borderSphere.translation.x = maxHypoLine.vertices[1].x;


        // get the angle of maxHypoLineContinuation
        // let angle2 = Math.atan2(maxHypoLineContinuation.vertices[1].y - maxHypoLineContinuation.vertices[0].y, maxHypoLineContinuation.vertices[1].x - maxHypoLineContinuation.vertices[0].x);
        // // convert to degrees
        // angle2 = angle2 * (180 / Math.PI);
        // console.log(angle2);

        // for(i = 1; i <= lines.length; i++){
        //     lines[i].vertices[0].x = lines[i - 1].vertices[1].x;
        // }
    });

</script>