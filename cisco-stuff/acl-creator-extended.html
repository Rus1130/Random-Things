<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
<!ATTLIST tag onsubmit CDATA #IMPLIED>
<style>
    div {
        display: none;
    }

    input:focus {
        outline: none;
    }

    textarea:focus {
        outline: none;
    }
</style>
<head>

</head>
<body>
    <h2>extended ACL creator<br></h2>
    To confirm text input, press enter while focused in the input<br>
    you cannot edit inputs after they've been confirmed
    <hr>
    <div id="named-or-numbered" style="display: block;">
        Is the ACL named or numbered?
        <input type="radio" name="named-or-numbered" value="named" id="named-type" oninput="reveal('name-input-div')"> Named
        <input type="radio" name="named-or-numbered" value="numbered" id="numbered-type" oninput="reveal('number-input-div')"> Numbered
    </div>
    <div id="name-input-div">
        Name of ACL:
        <input type="text" id="acl-name" placeholder="name" onsubmit="reveal('permit-or-deny-div')" pattern="[a-zA-Z]+">
    </div>
    <div id="number-input-div">
        Number of ACL:
        <input type="text" id="acl-number" placeholder="number" onsubmit="reveal('permit-or-deny-div')" pattern="[\d]+">
    </div>
</body>
<script>
    function reveal(id){
        if(typeof id === "string") document.getElementById(id).style.display = "block";
        else if (typeof id === "object") {
            for (let i = 0; i < id.length; i++){
                document.getElementById(id[i]).style.display = "block";
            }
        }
    }

    let inputs = document.getElementsByTagName('input');
    for (let i = 0; i < inputs.length; i++){
        if (inputs[i].type === 'radio'){
            inputs[i].addEventListener('click', function(){
                let name = this.name;
                let value = this.value;
                let allInputs = document.getElementsByName(name);
                for (let j = 0; j < allInputs.length; j++){
                    if (allInputs[j].value !== value){
                        allInputs[j].disabled = true;
                    }
                }
            });
        }

        if (inputs[i].type === 'text'){
            inputs[i].setAttribute('autocomplete', 'off');
            inputs[i].addEventListener('keydown', function(e){
                if(e.key == "Enter"){
                    if(this.hasAttribute('pattern')){
                        let regex = new RegExp(this.getAttribute('pattern'));
                        if(regex.test(this.value)){
                            this.disabled = true;
                            if(this.hasAttribute('onsubmit')){
                                this.onsubmit();
                            }
                        } else {
                            alert(`Invalid input`);
                        }
                    } else {
                        this.disabled = true;
                        if(this.hasAttribute('onsubmit')){
                            this.onsubmit();
                        }
                    }
                }
            });
        }
    }
</script>