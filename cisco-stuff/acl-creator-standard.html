
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
<!ATTLIST tag onsubmit CDATA #IMPLIED>

<style>
    div {
        display: none;
    }

    input:focus {
        outline: none;
    }
</style>
<head>

</head>
<body>
    standard ACL creator<br>
    To confirm text input, press enter while focused in the input<br>
    you cannot edit inputs after they've been selected
    <hr>
    <div id="named-or-numbered" style="display: block;">
        Is the ACL named or numbered?
        <input type="radio" name="named-or-numbered" value="named" id="named-type" oninput="reveal('name-input')"> Named
        <input type="radio" name="named-or-numbered" value="numbered" id="numbered-type" oninput="reveal('number-input')"> Numbered
    </div>
    <div id="name-input">
        Name of ACL:
        <input type="text" id="acl-name" placeholder="name" onsubmit="reveal('permit-or-deny')" pattern="[a-zA-Z]+">
    </div>
    <div id="number-input">
        Number of ACL:
        <input type="text" id="acl-number" placeholder="number" onsubmit="reveal('permit-or-deny')" pattern="[\d]+">
    </div>
    <div id="permit-or-deny">
        Permit or deny traffic?
        <input type="radio" name="standard-permit-or-deny" value="permit" id="traffic-permit" oninput="reveal('source')"> Permit
        <input type="radio" name="standard-permit-or-deny" value="deny" id="traffic-deny" oninput="reveal('source')"> Deny
    </div>
    <div id="source">
        IP address of the traffic:
        <input type="text" id="ip" placeholder="IP address" onsubmit="reveal('wildcard')" pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
    </div>
    <div id="wildcard">
        Wildcard mask of the IP address:
        <input type="text" id="wildcard" placeholder="wildcard mask" onsubmit="reveal('interface')" pattern="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$">
    </div>
    <div id="interface">
        Interface to apply the ACL to:
        <input type="text" id="interface" placeholder="interface" onsubmit="reveal('direction')">
    </div>
    <div id="direction">
        Is the interface taking traffic from the network or putting traffic out to the network?
        <input type="radio" name="direction" value="in" id="in" oninput="reveal('done')"> In
        <input type="radio" name="direction" value="out" id="out" oninput="reveal('done')"> Out
    </div>
    <div id="done">
        done! no output yet because i havent implemented it yet
    </div>
</body>
<script>
    function reveal(id){
        if(typeof id === "string") document.getElementById(id).style.display = "block";
        else if (typeof id === "object") {
            for (let i = 0; i < id.length; i++){
                document.getElementById(id[i]).style.display = "block";
            }
        }
    }

    // for each unique name tag, once it has been selected, disable so it cannot be edited
    let inputs = document.getElementsByTagName('input');
    for (let i = 0; i < inputs.length; i++){
        inputs[i].setAttribute('autocomplete', 'off');
        if (inputs[i].type === 'radio'){
            inputs[i].addEventListener('click', function(){
                let name = this.name;
                let value = this.value;
                let allInputs = document.getElementsByName(name);
                for (let j = 0; j < allInputs.length; j++){
                    if (allInputs[j].value !== value){
                        allInputs[j].disabled = true;
                    }
                }
            });
        }


        if (inputs[i].type === 'text'){
            inputs[i].addEventListener('keydown', function(e){
                if(e.key == "Enter"){
                    if(this.hasAttribute('pattern')){
                        let regex = new RegExp(this.getAttribute('pattern'));
                        if(regex.test(this.value)){
                            this.disabled = true;
                            if(this.hasAttribute('onsubmit')){
                                this.onsubmit();
                            }
                        } else {
                            alert(`Invalid input`);
                        }
                    } else {
                        this.disabled = true;
                        if(this.hasAttribute('onsubmit')){
                            this.onsubmit();
                        }
                    }
                }
            });
        }
    }


</script>