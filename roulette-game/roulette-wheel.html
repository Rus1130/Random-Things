<style>
    #rouletteVisualizer {
        width: 800px;
        height: 300px;
        position: absolute;
        display: grid;
        grid-template-columns: repeat(4, 200px);
        z-index: 1;
        background-color: white;
    }
    #visualizer1, #visualizer2, #visualizer3, #visualizer4 {
        transform: translate(100px, 0);
        z-index: 2;
        background-color: white;
    }

    #visual {
        width: 600px;
        height: 300px;
        position: absolute;
        z-index: 1;
        background-color: white;
        font-size: 20px;
        overflow: hidden;
    }

    #centerer {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        width: 100%;
    }

    #wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
    }
</style>
<header>
    <script src="two.js"></script>
</header>
<body>
    <div id="wrapper">
        <div id="visual">
            <div id="centerer">
                <div id="rouletteVisualizer">
                    <div id="visualizer1">AA</div>
                    <div id="visualizer2">BB</div>
                    <div id="visualizer3">CC</div>
                    <div id="visualizer4">DD</div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>

    let two = new Two({
        fullscreen: true,
        autostart: true
    }).appendTo(document.body);

    const rouletteVisualizer = document.getElementById('rouletteVisualizer');

    const numberOrder = [0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26]
        const numbers = {
        0: 'green',
        32: 'red',
        15: 'black',
        19: 'red',
        4: 'black',
        21: 'red',
        2: 'black',
        25: 'red',
        17: 'black',
        34: 'red',
        6: 'black',
        27: 'red',
        13: 'black',
        36: 'red',
        11: 'black',
        30: 'red',
        8: 'black',
        23: 'red',
        10: 'black',
        5: 'red',
        24: 'black',
        16: 'red',
        33: 'black',
        1: 'red',
        20: 'black',
        14: 'red',
        31: 'black',
        9: 'red',
        22: 'black',
        18: 'red',
        29: 'black',
        7: 'red',
        28: 'black',
        12: 'red',
        35: 'black',
        3: 'red',
        26: 'black'
    }

    function setNumbers(startAt){
        for(i = 0; i < 4; i++){
            let index = ((startAt - 1) + i) % 37;
            // wrap around to 36 if we go negative
            if(index <= -1){
                index = 36;
            }
            let number = numberOrder[index];
            let color = numbers[number];
            let visualizer = document.getElementById(`visualizer${i + 1}`);
            visualizer.innerHTML = number;
            visualizer.style.backgroundColor = color;
            if(color === 'black'){
                visualizer.style.color = 'white';
            }
        }
    }

    function spin(times){
        let visualizer1 = document.getElementById('visualizer1');
        let visualizer2 = document.getElementById('visualizer2');
        let visualizer3 = document.getElementById('visualizer3');
        let visualizer4 = document.getElementById('visualizer4');

        let start = Date.now();
        
        let timer = setInterval(function() {

            let timePassed = Date.now() - start;
            let animLength = 200;
            let animEquation = -timePassed + 100; 

            let fullStatement = animEquation <= -90 ? -100 : animEquation

            if (timePassed >= animLength) {
                clearInterval(timer);


                let index = numberOrder.indexOf(parseInt(visualizer4.innerHTML));

                let number = numberOrder[index + 1];


                let color = numbers[number];

                visualizer1.style.transform = `translate(${-fullStatement}px, 0)`;
                visualizer2.style.transform = `translate(${-fullStatement}px, 0)`;
                visualizer3.style.transform = `translate(${-fullStatement}px, 0)`;
                visualizer4.style.transform = `translate(${-fullStatement}px, 0)`;
                
                visualizer1.innerHTML = visualizer2.innerHTML;
                visualizer1.style.backgroundColor = visualizer2.style.backgroundColor;
                if(visualizer1.style.backgroundColor == 'black'){
                    visualizer1.style.color = 'white';
                } else {
                    visualizer1.style.color = 'black';
                }
            
                visualizer2.innerHTML = visualizer3.innerHTML;
                visualizer2.style.backgroundColor = visualizer3.style.backgroundColor;
                if(visualizer2.style.backgroundColor == 'black'){
                    visualizer2.style.color = 'white';
                } else {
                    visualizer2.style.color = 'black';
                }

                visualizer3.innerHTML = visualizer4.innerHTML;
                visualizer3.style.backgroundColor = visualizer4.style.backgroundColor;
                if(visualizer3.style.backgroundColor == 'black'){
                    visualizer3.style.color = 'white';
                } else {
                    visualizer3.style.color = 'black';
                }

                visualizer4.innerHTML = number;
                visualizer4.style.backgroundColor = color;
                if(visualizer4.style.backgroundColor == 'black'){
                    visualizer4.style.color = 'white';
                } else {
                    visualizer4.style.color = 'black';
                }

                return;
            }

            visualizer1.style.transform = `translate(${fullStatement}px, 0)`;
            visualizer2.style.transform = `translate(${fullStatement}px, 0)`;
            visualizer3.style.transform = `translate(${fullStatement}px, 0)`;
            visualizer4.style.transform = `translate(${fullStatement}px, 0)`;

        }, 1);
    }


    function spinTimesMax36(times){
        let i = 0;
        let interval = setInterval(function(){
            spin();
            i++;
            if(i >= times){
                clearInterval(interval);
            }
        }, 200);
    }




    setNumbers(0);
    spinNtimes(36);
</script>