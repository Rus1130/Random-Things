<style>
    html {
        font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    input:focus {
        outline: none;
    }
    .focus {
        display: initial;
    }
    .unfocus {
        display: none;
    }
</style>
<head>
    <script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1 id="optionDisplay"></h1>
    <input type="text" id="input"></input>
    <br>
    <h3>Loaded: <span id="loadText"></span></h3>
    <div>
        Enter to save<br>
        l to load <br>
        space to cycle <br>
        p to write protect <br>
        shift + space for debug <br>
    </div>
    <div id="debug" class="unfocus">
        <h1>Debug:</h1>
        <div id="hddHTML1"></div>
        <div id="hddHTML2"></div>
        <div id="hddHTML3"></div>
        <div id="hddHTML4"></div>
        <div id="hddHTML5"></div>
        <div id="hddHTML6"></div>
        <div id="hddHTML7"></div>
    </div>
</body>

<script>
    var diskNum = 1;
    var loadText = document.getElementById("loadText")
    var optionDisplay = document.getElementById("optionDisplay");
    var input = document.getElementById("input")
    var debug = document.getElementById("debug")

    optionDisplay.innerHTML = "Disk 1"

    window.addEventListener('load', (event) => {
        setDebugValues()
    });
    

    function optionSwitcher(){
        optionDisplay.innerHTML = `Disk ${diskNum}`;
        setDebugValues()
    }

    function cycleDisk(){
        if(diskNum == 5){
            diskNum = 1;
            HDD["currentDisk"] = diskNum;
        } else {
            diskNum++;
            HDD["currentDisk"] = diskNum;
        }
        setDebugValues();
        optionSwitcher();
    }

    var HDD = {
        1:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        2:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        3:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        4:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        5:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        "loadedDisk":"",
        "currentDisk":""
    }

    function save(){
        if(HDD[diskNum]["writeProtect"] == true){
            HDD[diskNum]['text'] = "";
        } else {
            HDD[diskNum]['text'] = input.value;
            (HDD[diskNum]['text'] == '' ? HDD[diskNum]['inUse'] = false : HDD[diskNum]['inUse'] = true);
        }
        setDebugValues();
    }

    function load(){
        loadText.innerHTML = HDD[diskNum]['text'];
        HDD["loadedDisk"] = diskNum;
        setDebugValues();
    }

    //submit text on enter
    $(document).on("keypress", function(e){
        if(e.which == 13){
            save()
            setDebugValues()
        }
    });
    //========

    function setDebugValues(){
        HDD["currentDisk"] = diskNum;

        if(HDD[diskNum]["writeProtect"] == true){
            input.disabled = true;
            input.setAttribute("style","cursor: no-drop; user-select: none;")
            input.title = "Write Protected";
        } else {
            input.disabled = false;
            input.removeAttribute("style","cursor: no-drop; user-select: none;")
            input.removeAttribute("title")
        }

        document.getElementById("hddHTML1").innerHTML = '{"1":'+JSON.stringify(HDD[1])+",";
        document.getElementById("hddHTML2").innerHTML = '"2":'+JSON.stringify(HDD[2])+",";
        document.getElementById("hddHTML3").innerHTML = '"3":'+JSON.stringify(HDD[3])+",";
        document.getElementById("hddHTML4").innerHTML = '"4":'+JSON.stringify(HDD[4])+",";
        document.getElementById("hddHTML5").innerHTML = '"5":'+JSON.stringify(HDD[5])+",";
        document.getElementById("hddHTML6").innerHTML = '"loadedDisk":'+JSON.stringify(HDD["loadedDisk"])+",";
        document.getElementById("hddHTML7").innerHTML = '"currentDisk":'+JSON.stringify(HDD["currentDisk"])+"}";
    }

    hotkeys("shift + space",function(){
        if(debug.hasAttribute("class","unfocus")){
            debug.removeAttribute("class","unfocus")
        } else {
            debug.setAttribute("class","unfocus")
        }
    })

    hotkeys("l",function(){
        load()
    })

    hotkeys("space",function(){
        cycleDisk()
    })

    hotkeys("p", function(){
        writeProtectCheck();
        setDebugValues()
    })

    var diskCapture;

    function writeProtectCheck(){
        diskCapture = optionDisplay.innerHTML.toString().replace(/\D/g,'')

        HDD[diskNum]["writeProtect"] = !HDD[diskNum]["writeProtect"];
        setDebugValues()
    }

</script>