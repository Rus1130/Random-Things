<style>
    html {
        font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    input:focus {
        outline: none;
    }
    .focus {
        display: initial;
    }
    .unfocus {
        display: none;
    }
</style>
<head>
    <script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1 id="optionDisplay"></h1>
    <input type="text" id="input"></input>
    <br>
    <h3>Loaded: <span id="loadText"></span></h3>
    <div>
        Enter to save<br>
        l to load <br>
        space to cycle <br>
        p to write protect <br>
        / to focus on input <br>
        delete key to wipe <br>
        shift + space for debug <br>
        a to set admin password <br>
        shift + a to reset admin password <br>
    </div>
    <div id="debug" class="unfocus">
        <h1>Debug:</h1>
        <div id="debugHDD1"></div>
        <div id="debugHDD2"></div>
        <div id="debugHDD3"></div>
        <div id="debugHDD4"></div>
        <div id="debugHDD5"></div>
        <div id="debugHDD6"></div>
        <div id="debugHDD7"></div>
        <div id="debugHDD8"></div>
        <div id="debugHDD9"></div>
        <div id="debugHDD10"></div>
        <div id="debugHDD11"></div>
        <div id="debugHDD12"></div>
        <div id="debugHDD13"></div>
        <div id="debugHDD14"></div>
        <div id="debugHDD15"></div>
        <div id="debugHDD16"></div>
        <div id="debugHDD17"></div>
        <div id="debugHDD18"></div>
        <div id="debugHDD19"></div>
        <div id="debugHDD20"></div>
        <div id="debugHDD21"></div>
        <div id="debugHDD22"></div>
    </div>
</body>

<script>

    var diskNum = 1;
    var loadText = document.getElementById("loadText")
    var optionDisplay = document.getElementById("optionDisplay");
    var input = document.getElementById("input")
    var debug = document.getElementById("debug")
    var debugHDD = document.getElementById("debugHDD")

    optionDisplay.innerHTML = "Disk 1"

    window.addEventListener('load', (event) => {
        setDebugValues()
    });
    

    function optionSwitcher(){
        optionDisplay.innerHTML = `Disk ${diskNum}`;
        setDebugValues()
    }

    function cycleDisk(){
        if(diskNum == 20){
            diskNum = 1;
            HDD["currentDisk"] = diskNum;
        } else {
            diskNum++;
            HDD["currentDisk"] = diskNum;
        }
        setDebugValues();
        optionSwitcher();
    }

    var HDD = {
        1:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        2:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        3:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        4:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        5:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        6:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        7:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        8:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        9:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        10:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        11:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        12:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        13:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        14:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        15:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        16:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        17:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        18:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        19:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        20:{
            "text":"",
            "inUse":false,
            "writeProtect":false,
        },
        "loadedDisk":"",
        "currentDisk":"",
        "admin":""
    }

    function save(){
        if(HDD[diskNum]["writeProtect"] == true){
            HDD[diskNum]['text'] = "";
        } else {
            HDD[diskNum]['text'] = input.value;
            (HDD[diskNum]['text'] == '' ? HDD[diskNum]['inUse'] = false : HDD[diskNum]['inUse'] = true);
        }
        setDebugValues();
    }

    function load(){
        loadText.innerHTML = HDD[diskNum]['text'];
        HDD["loadedDisk"] = diskNum;
        setDebugValues();
    }

    //submit text on enter
    $(document).on("keypress", function(e){
        if(e.which == 13){
            save()
            setDebugValues()
        }
    });
    //========

    function setDebugValues(){
        

        HDD["currentDisk"] = diskNum;

        document.getElementById("debugHDD1").innerHTML = '{"1":' + JSON.stringify(HDD[1]) + ",";
        document.getElementById("debugHDD2").innerHTML = '"2":' + JSON.stringify(HDD[2]) + ",";
        document.getElementById("debugHDD3").innerHTML = '"3":' + JSON.stringify(HDD[3]) + ",";
        document.getElementById("debugHDD4").innerHTML = '"4":' + JSON.stringify(HDD[4]) + ",";
        document.getElementById("debugHDD5").innerHTML = '"5":' + JSON.stringify(HDD[5]) + ",";
        document.getElementById("debugHDD6").innerHTML = '"6":' + JSON.stringify(HDD[6]) + ",";
        document.getElementById("debugHDD7").innerHTML = '"7":' + JSON.stringify(HDD[7]) + ",";
        document.getElementById("debugHDD8").innerHTML = '"8":' + JSON.stringify(HDD[8]) + ",";
        document.getElementById("debugHDD9").innerHTML = '"9":' + JSON.stringify(HDD[9]) + ",";
        document.getElementById("debugHDD10").innerHTML = '"10":' + JSON.stringify(HDD[10]) + ",";
        document.getElementById("debugHDD11").innerHTML = '"11":' + JSON.stringify(HDD[11]) + ",";
        document.getElementById("debugHDD12").innerHTML = '"12":' + JSON.stringify(HDD[12]) + ",";
        document.getElementById("debugHDD13").innerHTML = '"13":' + JSON.stringify(HDD[13]) + ",";
        document.getElementById("debugHDD14").innerHTML = '"14":' + JSON.stringify(HDD[14]) + ",";
        document.getElementById("debugHDD15").innerHTML = '"15":' + JSON.stringify(HDD[15]) + ",";
        document.getElementById("debugHDD16").innerHTML = '"16":' + JSON.stringify(HDD[16]) + ",";
        document.getElementById("debugHDD17").innerHTML = '"17":' + JSON.stringify(HDD[17]) + ",";
        document.getElementById("debugHDD18").innerHTML = '"18":' + JSON.stringify(HDD[18]) + ",";
        document.getElementById("debugHDD19").innerHTML = '"19":' + JSON.stringify(HDD[19]) + ",";
        document.getElementById("debugHDD20").innerHTML = '"20":' + JSON.stringify(HDD[20]) + ",";
        document.getElementById("debugHDD21").innerHTML = '"loadedDisk":' + JSON.stringify(HDD["loadedDisk"]) + ",";
        document.getElementById("debugHDD22").innerHTML = '"currentDisk":' + JSON.stringify(HDD["currentDisk"]) + "}";
    }

    var signed = false;

    hotkeys("shift + space",function(){
        if(HDD["admin"] == '' && signed == false){
            alert("Please set an Admin password.")
        } else {
            if(signed == false){
                adminpassword = prompt("Enter the Admin password:")
                if(adminpassword == HDD["admin"]){
                    signed = true;
                }
            }
            if(signed == true){
                if(debug.hasAttribute("class","unfocus")){
                        debug.removeAttribute("class","unfocus")
                    } else {
                        debug.setAttribute("class","unfocus")
                    }
                }
            }
        }
    )

    hotkeys("l",function(){
        load()
    })

    hotkeys("space",function(){
        cycleDisk()
    })

    hotkeys("p", function(){
        writeProtectCheck();
        setDebugValues()

        if(HDD["admin"] == ""){
            writeProtect()
        } else {
            adminCheck = prompt("Please enter the Admin password:")
            if(adminCheck = HDD["admin"]){
                writeProtect()
            } else {
                alert("Incorrect Admin password.")
            }
        }
    })

    hotkeys("/", function(){
        input.value = "";
        setTimeout(function(){
            input.focus();
        }, 0.01)
    })

    var diskCapture;

    function writeProtectCheck(){

        diskCapture = optionDisplay.innerHTML.toString().replace(/\D/g,'')

        HDD[diskNum]["writeProtect"] = !HDD[diskNum]["writeProtect"];
        setDebugValues()
    }

    hotkeys("delete", function(){
        if(HDD["admin"] == ""){
            alert("Please set an Admin password.")
        } else {
            password = prompt("Please enter the Admin password:")
            if(password == HDD["admin"]){
                wipeConfirm = confirm("Are you sure you want to wipe? This cannot be undone.")
                if(wipeConfirm){
                        let i;
                    for (i = 1; i < 20; i++) {
                        HDD[i]["text"] = ""; 
                        HDD[i]["inUse"] = false; 
                        HDD[i]["writeProtect"] = false;
                    }
                    HDD["loadedDisk"] = 1;
                    HDD["currentDisk"] = "";
                    HDD["admin"] = "";
                    setDebugValues()
                }
            } else {
                alert("Incorrect Admin password.")
            }
        }
    })

    hotkeys("a", function(){
        adminPrompt = prompt("Please set an Admin password:")
        if(adminPrompt != null){
            HDD["admin"] = adminPrompt;
            setDebugValues()
        }
    })

    hotkeys("shift + a", function(){
        if(HDD["admin"] == ''){
            alert("Please set an admin password first.")
        } else {
            oldAdminPassword = prompt("Please enter the old Admin password:")
            if(oldAdminPassword != HDD["admin"] || null){
                alert("There was an issue resetting the Admin password.")
            } else {
                newAdminPassword = prompt("Please enter the new Admin password:")
                HDD["admin"] = newAdminPassword
                alert("Password resetting successful.")
            }
        }
        
    })

    function writeProtect(){
        if(HDD[diskNum]["writeProtect"] == true){
                input.value = "";
                input.disabled = true;
                input.setAttribute("style","cursor: no-drop; user-select: none;")
                input.title = "Write Protected";
            } else {
                input.disabled = false;
                input.removeAttribute("style","cursor: no-drop; user-select: none;")
                input.removeAttribute("title")
            }
    }

    setInterval(function(){
        writeProtect()
    },1)

</script>