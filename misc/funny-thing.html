<style>
    #area {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
    }
    .player {
        width: 50px;
        height: 50px;
        position: absolute;
        top: calc(50% - 25px);
        left: calc(50% - 25px);
        background-color: red;
        border: 1px black solid;
    }
</style>
<head>

</head>
<body>
    <div id="area">
        <div id="player" class="player"></div>
    </div>
</body>
<script>
    const area = document.getElementById('area');
    function move(x, y){
        const player = document.getElementById('player');
        const playerRect = player.getBoundingClientRect();
        const areaRect = area.getBoundingClientRect();
        const newX = playerRect.left + x;
        const newY = playerRect.top + y;
        if(newX >= areaRect.left && newX <= areaRect.right - playerRect.width){
            player.style.left = newX + 'px';
        }
        if(newY >= areaRect.top && newY <= areaRect.bottom - playerRect.height){
            player.style.top = newY + 'px';
        }
    }

    const playerData = {
        x: 0,
        y: 0,
        dx: 0,
        dy: 0,
        interval: null,
        up: 'w',
        down: 's',
        left: 'a',
        right: 'd',
        speed: 1,
    }

    // smooth movement
    function start(){
        if(playerData.interval){
            clearInterval(playerData.interval);
        }
        playerData.interval = setInterval(() => {
            move(playerData.x, playerData.y);
        }, 1);
    }

    function stop(){
        clearInterval(playerData.interval);
        playerData.interval = null;
    }

    // keydown
    document.addEventListener('keydown', (e) => {
        switch(e.key){
            case playerData.up:
                playerData.y = -playerData.speed;
                break;
            case playerData.down:
                playerData.y = playerData.speed;
                break;
            case playerData.left:
                playerData.x = -playerData.speed;
                break;
            case playerData.right:
                playerData.x = playerData.speed;
                break;
        }
        start();
    });

    // keyup
    document.addEventListener('keyup', (e) => {
        // when keyup, slowly stop movement according to friction
        switch(e.key){
            case playerData.up:
                playerData.dy = -playerData.speed;
                break;
            case playerData.down:
                playerData.dy = playerData.speed;
                break;
            case playerData.left:
                playerData.dx = -playerData.speed;
                break;
            case playerData.right:
                playerData.dx = playerData.speed;
                break;
        }
        stop();
    });


</script>