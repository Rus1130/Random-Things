<body>
    <div id="typer-in" style="display:none">They had gotten the fishy smell very nearly correct, so he'd have to send his regards to the engineers._Fish, mud, and the stale metallic aftertaste that recycled station air always seemed to leave in his mouth._The grass, too, was just right. Springy. Damp. A little gross. The entire holographic expanse was well done, as close as he could possibly get to home, here on the station._The final test, of course, to see if he'd wasted his money or not, was waiting just across the gravel road. He didn't want to go in.!TYPER-BREAK!No, that wasn't right. He did want to go in, and he dreaded it._It was a house, single story propped up on stilts to accommodate floods and old to enough to show the wear and tear of more than a few tropical storms. _The real deal was probably in even worse shape now, with no one around to take care of it. To repair it when it broke._With a sigh, he lifted himself from patch of dirt that he sat on, crossing the road in a few confident strides. _As a child, he'd run up to the house barefoot, and taken flying leaps over the ditches instead of trudging up the hot, pebbly driveway._Now, many years and many millions of miles away from then, he winces at the crunch of his work boots against the ground. _The house looms before him, though he knows it to only be large enough to house three comfortably, and four or five in a pinch. _The storm door opens easily, freshly oiled despite its appearance._He'll have to get that fixed._The wooden inner door has flaking paint on it, pale green and hand carved. It's old, but it withstands his two short knocks.!TYPER-BREAK!The porch swing was empty.!TYPER-BREAK!Light footsteps can be heard on the other side of the door, and it opens, slowly._And there she is. He's looking over her, professional for a brief moment, checking everything off the list._Hair, eyes, hands, mouth...the rest. Neither of them has spoken for a few moments now._They'd made sure she knew—had programmed this to be updated on the situation._On the reasoning. So, she—it was aware that it was a hologram._It was aware of why. He doesn't care much, not right now, because it's her. She's here.</div>
    <div id="typer-out" style="word-wrap:normal"></div>
</body>
<script>
    class Typer {
        /*
        options.newlineDelimiter (default: '_')
        options.breakDelimiter (default: '!TYPER-BREAK!')
        options.customDelays = {char: delay}


        */
        constructor(inputID, outputID, options){
            this.inputEl = document.getElementById(inputID);
            this.outputEl = document.getElementById(outputID);
            this.text = this.inputEl.innerText.split(options.breakDelimiter || '!TYPER-BREAK!');
            this.index = 0;
            this.line = 0;
            this.speed = options.speed || 100;
            this.newlineDelimiter = options.newlineDelimiter || '_';
            this.newlineDelay = options.newlineDelay || 0;
            this.breakDelay = options.breakDelay || 0;
            this.customDelays = options.customDelays;
        }

        typeNextChar() {
            if (this.index < this.text[this.line].length) {
                let char = this.text[this.line][this.index];

                if(char == " ") char = "&nbsp;";
                if(char == this.newlineDelimiter){
                    this.outputEl.innerHTML += '<br>';
                    this.index++;
                    setTimeout(() => this.typeNextChar(), this.newlineDelay);
                } else {
                    let delay = this.customDelays[char] || this.speed;
                    this.outputEl.innerHTML += char;
                    this.index++;
                    setTimeout(() => this.typeNextChar(), delay);
                }
            } else {
                this.index = 0;
                this.line++;
                if (this.line < this.text.length) {
                    setTimeout(() => {
                        this.outputEl.innerHTML += '<br><br>';
                        setTimeout(() => {
                            this.typeNextChar();
                        }, this.newlineDelay);
                    }, this.breakDelay);
                }
            }
        }

        start() {
            this.typeNextChar();
        }

        setSpeed(speed) {
            this.speed = speed;
        }

    }

    const typer = new Typer('typer-in', 'typer-out', {
        speed: 32,
        breakDelay: 500,
        customDelays: {
            '.': 1,//500,
        }
    });
    typer.start();
    typer.setSpeed(1)

</script>