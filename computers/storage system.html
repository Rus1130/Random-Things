<style>

</style>
<head>

</head>
<body>
<pre>docs:
    Sys:
        mgmt:
            changeDriveName(driveNumber, newName):
                changes the name of the drive
                parameters:
                    driveNumber (Integer): drive number
                    newName (String): new name for drive of driveNumber

            createFile(driveNumber, fileName, fileType, fileContent)
                creates a file
                parameters:
                    driveNumber (Integer): drive number
                    fileName (String): name of file
                    fileContent (String): content of file

                overwriteFile(driveNumber, fileName, fileType, fileContent)
                overwrites the content of a file
                parameters:
                    driveNumber (Integer): drive number
                    fileName (String): name of file
                    fileContent (String): content of file

        sec:
            hideFile(driveNumber, fileName, value):
                sets the hidden status of a file
                parameters:
                    driveNumber (Integer): drive number
                    fileName (String): name of file
                    value (Boolean): hidden status
            
            lockFile(driveNumber, fileName, value):
                sets the locked status of a file
                parameters:
                    driveNumber (Integer): drive number
                    fileName (String): name of file
                    value (Boolean): locked status

            hideDrive(driveNumber, value){
                sets the hidden status of a drive
                parameters:
                    driveNumber (Integer): drive number
                    value (Boolean): hidden status

        out:
            readFile(driveNumber, fileName):
                reads the content of a file
                parameters:
                    driveNumber (Integer): drive number
                    fileName (String): name of file

            displayDrives(driveNumber):
            displays all drives
            parameters:
                driveNumber (Integer) (optional): displays specified drive
        
</docs>
</body>
<script>
    const fileTempate = {
        'hidden': false,
        'locked': false,
        "content": ""
    }
    function setDrives(){
        for(i = 0; i < 20; i++){
            Sys.drives[i] = {
                name: "Drive " + i,
                size: 8000000,
                used: 0,
                hidden: false,
                locked: false,
                files: {}
            }
        }
    }

    function secShow(){
        let drives = JSON.parse(JSON.stringify(Sys.drives))
        for(i = 0; i < Object.keys(drives).length; i++){
            drives[i].files = Object.keys(drives[i].files)
            if(drives[i].hidden){
                delete drives[i]
            }
        }
        return drives
    }
    // make a function that return true if any file in the specified drive is locked, hidden, or if that drive is locked or hidden
    function secCheck(driveNumber, checkFiles){
        if(checkFiles == undefined) checkFiles = false;
        let drive = Sys.drives[driveNumber]
        if(drive.hidden || drive.locked){
            return true
        }
        if(checkFiles){
            for(i = 0; i < Object.keys(drive.files).length; i++){
                let file = drive.files[Object.keys(drive.files)[i]]
                if(file.hidden || file.locked){
                    return true
                }
            }
        }
        return false
    }

    const Sys = {
        drives : {},
        mgmt : {
            changeDriveName(driveNumber, newName){
                if(secCheck(driveNumber)) return `Permission Error.`
                Sys.drives[driveNumber].name = newName
                return secShow(Sys.drives)[driveNumber]
            },
            createFile(driveNumber, fileName, fileContent){
                if(secCheck(driveNumber)) return `Permission Error.`
                if(Sys.drives[driveNumber].files[fileName] != undefined) return "Error: File already exists. Please use the overwrite function instead."
                let fileContentLength = fileContent.split("").map(x => x.charCodeAt(0).toString(2).padStart(8, "0")).join("").length
                if(fileContentLength > Sys.drives[driveNumber].size - Sys.drives[driveNumber].used) return 'Error: Not enough space.'
                let file = fileTempate
                file.content = fileContent
                Sys.drives[driveNumber].files[fileName] = file;

                Sys.drives[driveNumber].used += fileContentLength
                return Sys.drives[driveNumber].files[fileName]
            },
            overwriteFile(driveNumber, fileName, fileContent){
                if(Sys.drives[driveNumber].files[fileName].locked) return 'Error: file is locked.'
                let fileContentLength = fileContent.split("").map(x => x.charCodeAt(0).toString(2).padStart(8, "0")).join("").length
                if(fileContentLength > Sys.drives[driveNumber].size - Sys.drives[driveNumber].used) return 'Error: Not enough space.'
                let file = fileTempate
                file.content = fileContent
                Sys.drives[driveNumber].files[fileName] = file;

                Sys.drives[driveNumber].used += fileContentLength
                return Sys.drives[driveNumber].files[fileName]
            }
        },
        sec : {
            hideFile(driveNumber, fileName, value){
                Sys.drives[driveNumber].files[fileName].hidden = value
                return `Hidden value successfully set to ${value}.`
            },
            lockFile(driveNumber, fileName, value){
                Sys.drives[driveNumber].files[fileName].locked = value
                return `Locked value successfully set to ${value}.`
            },
            hideDrive(driveNumber, value){
                Sys.drives[driveNumber].hidden = value
                return `Drive ${driveNumber} successfully hidden.`
            }
        },
        out : {
            readFile(driveNumber, fileName){
                if(Sys.drives[driveNumber].files[fileName].hidden) return 'Error: file is hidden.'
                return Sys.drives[driveNumber].files[fileName].content
            },
            displayDrives(driveNumber){
                if(driveNumber == undefined) return secShow(Sys.drives)
                if(Sys.drives[driveNumber].hidden) return `Error: Drive ${driveNumber} is hidden.`
                return secShow(Sys.drives)[driveNumber]
            },

        }

    }


    setDrives()
    Sys.mgmt.createFile(0, "test", "hello world")
</script>